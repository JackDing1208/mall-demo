{"version":3,"sources":["webpack:///static/js/cart.24aec447c6191a0d195c.js","webpack:///./src/modules/js/api.js?4c58**","webpack:///./src/pages/cart/cart.js","webpack:///./src/modules/js/mixin.js?53fa*","webpack:///./src/modules/js/http.js"],"names":["webpackJsonp","0","module","__webpack_exports__","__webpack_require__","url","hotLists","banner","topLists","rankLists","subLists","searchLists","goods","deal","cartList","cartAdd","cartMinus","cartRemove","cartUpdate","key","hasOwnProperty","100","Object","defineProperty","value","__WEBPACK_IMPORTED_MODULE_0_vue__","__WEBPACK_IMPORTED_MODULE_1_axios__","__WEBPACK_IMPORTED_MODULE_1_axios___default","n","__WEBPACK_IMPORTED_MODULE_2__modules_js_api_js__","__WEBPACK_IMPORTED_MODULE_3_js_mixin_js__","__WEBPACK_IMPORTED_MODULE_4_js_http_js__","__WEBPACK_IMPORTED_MODULE_5__cart_css__","__WEBPACK_IMPORTED_MODULE_6__cart_base_css__","__WEBPACK_IMPORTED_MODULE_7__cart_trade_css__","el","data","selectList","isEditing","computed","isAll","get","this","length","every","shop","checked","set","forEach","goodsList","good","totalPrice","currentTotal","currentGoods","price","number","push","selectNum","created","getCartList","methods","_this","then","res","editable","editText","selectGood","selectShop","selectAll","console","log","editShop","minusGood","a","post","id","num","plusGood","removeGood","index","shopIndex","_this2","splice","checkout","alert","mixins","6","Mixin","filters","toFixed","62","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_promise__","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_promise___default","fetch","method","resolve","reject","status","location","href","catch","http","64","exports","65","66"],"mappings":"AAAAA,cAAc,IAERC,EACA,SAAUC,EAAQC,EAAqBC,GAE7C,YCJA,IAAIC,IACFC,SAAU,kBACVC,OAAQ,gBACRC,SAAU,oBACVC,UAAW,iBACXC,SAAU,oBACVC,YAAa,eACbC,MAAO,iBACPC,KAAM,cACNC,SAAU,aACVC,QAAS,YACTC,UAAW,eACXC,WAAY,eACZC,WAAY,eAMd,KAAK,GAAIC,KAAOd,GACVA,EAAIe,eAAeD,KACrBd,EAAIc,GAJG,sEAIWd,EAAIc,GAI1BhB,GAAA,KDSMkB,IACA,SAAUnB,EAAQC,EAAqBC,GAE7C,YACAkB,QAAOC,eAAepB,EAAqB,cAAgBqB,OAAO,GAC7C,IAAIC,GAAoCrB,EAAoB,GACxDsB,EAAsCtB,EAAoB,GAC1DuB,EAA8CvB,EAAoBwB,EAAEF,GACpEG,EAAmDzB,EAAoB,GACvE0B,EAA4C1B,EAAoB,GAChE2B,EAA2C3B,EAAoB,IAC/D4B,EAA0C5B,EAAoB,IAE9D6B,GADkD7B,EAAoBwB,EAAEI,GACzB5B,EAAoB,KAEnE8B,GADuD9B,EAAoBwB,EAAEK,GAC7B7B,EAAoB,IACZA,GAAoBwB,EAAEM,EExCvG,IAAIT,GAAA,SACFU,GAAI,aACJC,MACEtB,SAAU,KACVuB,WAAY,KACZC,WAAU,GAGZC,UACEC,OAEEC,IAFK,WAGH,SAAIC,KAAK5B,UAAY4B,KAAK5B,SAAS6B,OAAO,IACjCD,KAAK5B,SAAS8B,MAAM,SAACC,GAC1B,OAAwB,IAAjBA,EAAKC,WAKlBC,IAVK,SAUDvB,GACFkB,KAAK5B,SAASkC,QAAQ,SAACH,GACrBA,EAAKC,QAAUtB,EACfqB,EAAKI,UAAUD,QAAQ,SAACE,GACtBA,EAAKJ,QAAUtB,QAKvB2B,WApBQ,WAsBN,GAAIC,GAAe,EACfC,IAYJ,OAXIX,MAAK5B,UACP4B,KAAK5B,SAASkC,QAAQ,SAACH,GACrBA,EAAKI,UAAUD,QAAQ,SAACE,GAClBA,EAAKJ,UACPM,GAAgBF,EAAKI,MAAQJ,EAAKK,OAClCF,EAAaG,KAAKN,QAK1BR,KAAKL,WAAagB,EACXD,GAETK,UArCQ,WAsCN,MAAGf,MAAKL,WAAWM,OAAO,EACjBD,KAAKL,WAAWM,OAElB,IAGXe,QApDM,WAqDJhB,KAAKiB,eAGPC,SACED,YADO,WACO,GAAAE,GAAAnB,IACZX,GAAA,EAAKU,IAAIZ,EAAA,EAAIf,UAAUgD,KAAK,SAAAC,GAE1BA,EAAI3B,KAAKtB,SAASkC,QAAQ,SAACH,GACzBA,EAAKC,SAAU,EACfD,EAAKmB,UAAW,EAChBnB,EAAKoB,SAAS,KACdpB,EAAKI,UAAUD,QAAQ,SAACE,GACtBA,EAAKJ,SAAU,MAInBe,EAAK/C,SAAWiD,EAAI3B,KAAKtB,YAG7BoD,WAhBO,SAgBIhB,EAAML,GACfK,EAAKJ,SAAWI,EAAKJ,QAErBD,EAAKC,QAAUD,EAAKI,UAAUL,MAAM,SAACM,GACnC,OAAwB,IAAjBA,EAAKJ,WAGhBqB,WAvBO,SAuBItB,GACTA,EAAKC,SAAWD,EAAKC,QACrBD,EAAKI,UAAUD,QAAQ,SAACE,GACtBA,EAAKJ,QAAUD,EAAKC,WAGxBsB,UA7BO,WA8BL1B,KAAKF,OAASE,KAAKF,MACnB6B,QAAQC,IAAI5B,KAAKF,QAEnB+B,SAjCO,SAiCE1B,GACPA,EAAKmB,UAAUnB,EAAKmB,SACpBnB,EAAKoB,SAASpB,EAAKmB,SAAS,KAAK,MAGnCQ,UAtCO,SAsCGtB,GACLA,EAAKK,OAAO,GACb5B,EAAA8C,EAAMC,KAAK7C,EAAA,EAAIb,WAAW2D,GAAGzB,EAAKyB,GAAGC,IAAI,IAAId,KAAK,WAChDZ,EAAKK,QAAQ,KAMnBsB,SA/CO,SA+CE3B,GACPvB,EAAA8C,EAAMC,KAAK7C,EAAA,EAAIb,WAAW2D,GAAGzB,EAAKyB,GAAGC,IAAI,IAAId,KAAK,WAChDZ,EAAKK,QAAQ,KAGjBuB,WApDO,SAoDI5B,EAAK6B,EAAMlC,EAAKmC,GAAU,GAAAC,GAAAvC,IACnCf,GAAA8C,EAAMC,KAAK7C,EAAA,EAAIZ,YAAY0D,GAAGzB,EAAKyB,KAAKb,KAAK,WAC3CjB,EAAKI,UAAUiC,OAAOH,EAAM,GACA,IAAxBlC,EAAKI,UAAUN,QACjBsC,EAAKnE,SAASoE,OAAOF,EAAU,MAIrCG,SA5DO,WA6DFzC,KAAKL,WAAWM,OAAO,GACxByC,MAAM,eAKZC,QAASvD,EAAA,MF0DLwD,EACA,SAAUpF,EAAQC,EAAqBC,GAE7C,YGnMA,IAAImF,IACFC,SACElC,MADO,SACD9B,GACJ,MAAOA,GAAMiE,QAAQ,KAO3BtF,GAAA,KHsMMuF,GACA,SAAUxF,EAAQC,EAAqBC,GAE7C,YACqB,IAAIuF,GAA8DvF,EAAoB,KAClFwF,EAAsExF,EAAoBwB,EAAE+D,GAC5FjE,EAAsCtB,EAAoB,GAC1DuB,EAA8CvB,EAAoBwB,EAAEF,GIrNzFmE,EAAQ,SAAUC,EAAQzF,EAAK+B,GACjC,MAAO,IAAAwD,GAAAnB,EAAY,SAACsB,EAASC,GAC3BrE,KAAOmE,SAAQzF,MAAK+B,SACjB0B,KAAK,SAACC,GACc,MAAfA,EAAIkC,QACN5B,QAAQC,IAAIP,GACZgC,EAAQhC,IACgB,MAAfA,EAAIkC,SACbC,SAASC,KAAO,gBAInBC,MAAM,SAACrC,GACNiC,EAAOjC,QAIXsC,GACF5D,IADS,SACLpC,EAAK+B,GACP,MAAOyD,GAAM,MAAOxF,EAAK+B,IAE3BsC,KAJS,SAIJrE,EAAK+B,GACR,MAAOyD,GAAM,OAAQxF,EAAK+B,IAK9BjC,GAAA,KJyNMmG,GACA,SAAUpG,EAAQqG,KAMlBC,GACA,SAAUtG,EAAQqG,KAMlBE,GACA,SAAUvG,EAAQqG,OAMrB","file":"static/js/cart.24aec447c6191a0d195c.js","sourcesContent":["webpackJsonp([4],{\n\n/***/ 0:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n//设置请求路径\nvar url = {\n  hotLists: '/index/hotLists',\n  banner: '/index/banner',\n  topLists: '/category/topList',\n  rankLists: '/category/rank',\n  subLists: '/category/subList',\n  searchLists: '/search/list',\n  goods: '/goods/details',\n  deal: '/goods/deal',\n  cartList: '/cart/list',\n  cartAdd: '/cart/add',\n  cartMinus: '/cart/reduce',\n  cartRemove: '/cart/remove',\n  cartUpdate: '/cart/update'\n\n  //方便开发环境与生产换件接口切换\n};var host = 'https://www.easy-mock.com/mock/5ce13bbdb98ae54df02ce862/youzan_copy';\n\nfor (var key in url) {\n  if (url.hasOwnProperty(key)) {\n    url[key] = host + url[key];\n  }\n}\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (url);\n\n/***/ }),\n\n/***/ 100:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_vue__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_axios__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_axios___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_axios__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__modules_js_api_js__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_js_mixin_js__ = __webpack_require__(6);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_js_http_js__ = __webpack_require__(62);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__cart_css__ = __webpack_require__(64);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__cart_css___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_5__cart_css__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__cart_base_css__ = __webpack_require__(65);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__cart_base_css___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_6__cart_base_css__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__cart_trade_css__ = __webpack_require__(66);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__cart_trade_css___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_7__cart_trade_css__);\n\n\n\n\n\n\n\n\n\n\nnew __WEBPACK_IMPORTED_MODULE_0_vue__[\"default\"]({\n  el: \".container\",\n  data: {\n    cartList: null,\n    selectList: null,\n    isEditing: false\n\n  },\n  computed: {\n    isAll: {\n      //主动设置计算属性时先通过set改变get中用到的data,再通过get返回新值\n      get: function get() {\n        if (this.cartList && this.cartList.length > 0) {\n          return this.cartList.every(function (shop) {\n            return shop.checked === true;\n          });\n        }\n        return false;\n      },\n      set: function set(value) {\n        this.cartList.forEach(function (shop) {\n          shop.checked = value;\n          shop.goodsList.forEach(function (good) {\n            good.checked = value;\n          });\n        });\n      }\n    },\n    totalPrice: function totalPrice() {\n      //每次计算前清空再赋值\n      var currentTotal = 0;\n      var currentGoods = [];\n      if (this.cartList) {\n        this.cartList.forEach(function (shop) {\n          shop.goodsList.forEach(function (good) {\n            if (good.checked) {\n              currentTotal += good.price * good.number;\n              currentGoods.push(good);\n            }\n          });\n        });\n      }\n      this.selectList = currentGoods;\n      return currentTotal;\n    },\n    selectNum: function selectNum() {\n      if (this.selectList.length > 0) {\n        return this.selectList.length;\n      }\n      return 0;\n    }\n  },\n  created: function created() {\n    this.getCartList();\n  },\n\n  methods: {\n    getCartList: function getCartList() {\n      var _this = this;\n\n      __WEBPACK_IMPORTED_MODULE_4_js_http_js__[\"a\" /* default */].get(__WEBPACK_IMPORTED_MODULE_2__modules_js_api_js__[\"a\" /* default */].cartList).then(function (res) {\n        //先加属性再给data赋值实现响应式\n        res.data.cartList.forEach(function (shop) {\n          shop.checked = false;\n          shop.editable = false;\n          shop.editText = '编辑';\n          shop.goodsList.forEach(function (good) {\n            good.checked = false;\n          });\n        });\n\n        _this.cartList = res.data.cartList;\n      });\n    },\n    selectGood: function selectGood(good, shop) {\n      good.checked = !good.checked;\n      //every方法检验每个元素是否符合要求，根据全部判断结果再返回真假值\n      shop.checked = shop.goodsList.every(function (good) {\n        return good.checked === true;\n      });\n    },\n    selectShop: function selectShop(shop) {\n      shop.checked = !shop.checked;\n      shop.goodsList.forEach(function (good) {\n        good.checked = shop.checked;\n      });\n    },\n    selectAll: function selectAll() {\n      this.isAll = !this.isAll;\n      console.log(this.isAll);\n    },\n    editShop: function editShop(shop) {\n      shop.editable = !shop.editable;\n      shop.editText = shop.editable ? '完成' : \"编辑\";\n    },\n    minusGood: function minusGood(good) {\n      if (good.number > 1) {\n        __WEBPACK_IMPORTED_MODULE_1_axios___default.a.post(__WEBPACK_IMPORTED_MODULE_2__modules_js_api_js__[\"a\" /* default */].cartMinus, { id: good.id, num: 1 }).then(function () {\n          good.number -= 1;\n        });\n      }\n      return;\n    },\n    plusGood: function plusGood(good) {\n      __WEBPACK_IMPORTED_MODULE_1_axios___default.a.post(__WEBPACK_IMPORTED_MODULE_2__modules_js_api_js__[\"a\" /* default */].cartMinus, { id: good.id, num: 1 }).then(function () {\n        good.number += 1;\n      });\n    },\n    removeGood: function removeGood(good, index, shop, shopIndex) {\n      var _this2 = this;\n\n      __WEBPACK_IMPORTED_MODULE_1_axios___default.a.post(__WEBPACK_IMPORTED_MODULE_2__modules_js_api_js__[\"a\" /* default */].cartRemove, { id: good.id }).then(function () {\n        shop.goodsList.splice(index, 1);\n        if (shop.goodsList.length === 0) {\n          _this2.cartList.splice(shopIndex, 1);\n        }\n      });\n    },\n    checkout: function checkout() {\n      if (this.selectList.length > 0) {\n        alert('暂未接入支付功能 ');\n      }\n      return;\n    }\n  },\n  mixins: [__WEBPACK_IMPORTED_MODULE_3_js_mixin_js__[\"a\" /* default */]]\n});\n\n/***/ }),\n\n/***/ 6:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nvar Mixin = {\n  filters: {\n    price: function price(value) {\n      return value.toFixed(2);\n    }\n  }\n};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Mixin);\n\n/***/ }),\n\n/***/ 62:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_promise__ = __webpack_require__(106);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_promise___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_promise__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_axios__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_axios___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_axios__);\n\n\n\nvar fetch = function fetch(method, url, data) {\n  return new __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_promise___default.a(function (resolve, reject) {\n    __WEBPACK_IMPORTED_MODULE_1_axios___default()({ method: method, url: url, data: data }).then(function (res) {\n      if (res.status === 200) {\n        console.log(res);\n        resolve(res);\n      } else if (res.status === 401) {\n        location.href = 'index.html';\n      }\n    }).catch(function (res) {\n      reject(res);\n    });\n  });\n};\nvar http = {\n  get: function get(url, data) {\n    return fetch('get', url, data);\n  },\n  post: function post(url, data) {\n    return fetch('post', url, data);\n  }\n};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (http);\n\n/***/ }),\n\n/***/ 64:\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ 65:\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ 66:\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ })\n\n},[100]);\n\n\n// WEBPACK FOOTER //\n// static/js/cart.24aec447c6191a0d195c.js","//设置请求路径\nlet url = {\n  hotLists: '/index/hotLists',\n  banner: '/index/banner',\n  topLists: '/category/topList',\n  rankLists: '/category/rank',\n  subLists: '/category/subList',\n  searchLists: '/search/list',\n  goods: '/goods/details',\n  deal: '/goods/deal',\n  cartList: '/cart/list',\n  cartAdd: '/cart/add',\n  cartMinus: '/cart/reduce',\n  cartRemove: '/cart/remove',\n  cartUpdate: '/cart/update'\n}\n\n//方便开发环境与生产换件接口切换\nlet host = 'https://www.easy-mock.com/mock/5ce13bbdb98ae54df02ce862/youzan_copy'\n\nfor (let key in url) {\n  if (url.hasOwnProperty(key)) {\n    url[key] = host + url[key]\n  }\n}\n\nexport default url\n\n\n\n// WEBPACK FOOTER //\n// ./src/modules/js/api.js","import Vue from 'vue'\nimport axios from 'axios'\nimport url from '../../modules/js/api.js'\nimport Mixin from 'js/mixin.js'\nimport http from 'js/http.js'\n\n\nimport './cart.css'\nimport './cart_base.css'\nimport './cart_trade.css'\n\nnew Vue({\n  el: \".container\",\n  data: {\n    cartList: null,\n    selectList: null,\n    isEditing:false\n\n  },\n  computed: {\n    isAll: {\n      //主动设置计算属性时先通过set改变get中用到的data,再通过get返回新值\n      get() {\n        if (this.cartList && this.cartList.length>0) {\n          return this.cartList.every((shop) => {\n            return shop.checked === true\n          })\n        }\n        return false\n      },\n      set(value) {\n        this.cartList.forEach((shop) => {\n          shop.checked = value\n          shop.goodsList.forEach((good) => {\n            good.checked = value\n          })\n        })\n      }\n    },\n    totalPrice() {\n      //每次计算前清空再赋值\n      let currentTotal = 0\n      let currentGoods = []\n      if (this.cartList) {\n        this.cartList.forEach((shop) => {\n          shop.goodsList.forEach((good) => {\n            if (good.checked) {\n              currentTotal += good.price * good.number\n              currentGoods.push(good)\n            }\n          })\n        })\n      }\n      this.selectList = currentGoods\n      return currentTotal\n    },\n    selectNum(){\n      if(this.selectList.length>0){\n        return this.selectList.length\n      }\n      return 0\n    }\n  },\n  created() {\n    this.getCartList()\n\n  },\n  methods: {\n    getCartList() {\n      http.get(url.cartList).then(res => {\n        //先加属性再给data赋值实现响应式\n        res.data.cartList.forEach((shop) => {\n          shop.checked = false\n          shop.editable = false\n          shop.editText='编辑'\n          shop.goodsList.forEach((good) => {\n            good.checked = false\n          })\n        })\n\n        this.cartList = res.data.cartList\n      })\n    },\n    selectGood(good, shop) {\n      good.checked = !good.checked\n      //every方法检验每个元素是否符合要求，根据全部判断结果再返回真假值\n      shop.checked = shop.goodsList.every((good) => {\n        return good.checked === true\n      })\n    },\n    selectShop(shop) {\n      shop.checked = !shop.checked\n      shop.goodsList.forEach((good) => {\n        good.checked = shop.checked\n      })\n    },\n    selectAll() {\n      this.isAll = !this.isAll\n      console.log(this.isAll);\n    },\n    editShop(shop){\n      shop.editable=!shop.editable\n      shop.editText=shop.editable?'完成':\"编辑\"\n\n    },\n    minusGood(good){\n      if(good.number>1){\n        axios.post(url.cartMinus,{id:good.id,num:1}).then(()=>{\n          good.number-=1\n        })\n\n      }\n      return\n    },\n    plusGood(good){\n      axios.post(url.cartMinus,{id:good.id,num:1}).then(()=>{\n        good.number+=1\n      })\n    },\n    removeGood(good,index,shop,shopIndex){\n      axios.post(url.cartRemove,{id:good.id}).then(()=>{\n        shop.goodsList.splice(index,1)\n        if (shop.goodsList.length===0){\n          this.cartList.splice(shopIndex,1)\n        }\n      })\n    },\n    checkout(){\n      if(this.selectList.length>0){\n        alert('暂未接入支付功能 ')\n      }\n      return\n    }\n  },\n  mixins: [Mixin]\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/cart/cart.js","let Mixin = {\n  filters: {\n    price(value){\n      return value.toFixed(2)\n    }\n  }\n}\n\n\n\nexport default Mixin\n\n\n\n// WEBPACK FOOTER //\n// ./src/modules/js/mixin.js","import axios from 'axios'\n\nlet fetch = function (method, url, data) {\n  return new Promise((resolve, reject) => {\n    axios({method, url, data})\n      .then((res) => {\n        if (res.status === 200) {\n          console.log(res);\n          resolve(res)\n        } else if (res.status === 401) {\n          location.href = 'index.html'\n        }\n\n      })\n      .catch((res) => {\n        reject(res)\n      })\n  })\n}\nlet http = {\n  get(url, data) {\n    return fetch('get', url, data)\n  },\n  post(url, data) {\n    return fetch('post', url, data)\n  }\n}\n\n\nexport default http\n\n\n\n// WEBPACK FOOTER //\n// ./src/modules/js/http.js"],"sourceRoot":""}